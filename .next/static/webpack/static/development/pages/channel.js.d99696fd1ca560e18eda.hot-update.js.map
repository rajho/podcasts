{"version":3,"file":"static/webpack/static/development/pages/channel.js.d99696fd1ca560e18eda.hot-update.js","sources":["webpack:///./components/LatestPodcastsWithClick.js","webpack:///./pages/channel.js"],"sourcesContent":["import Link from 'next/link'\nimport slug from '../helpers/slug'\n\nexport default class extends React.Component {\n  render() {\n    const { podcasts, onClickPodcast } = this.props\n\n    return <div>\n      { podcasts.map((podcast) => (\n        <a href={`/${slug(podcast.channel.title)}.${podcast.channel.id}/${slug(podcast.title)}.${podcast.id}`}\n          className='podcast' \n          key={podcast.id}\n          onClick={ (event) => onClickPodcast(event, podcast) }>\n\n          <h3>{ podcast.title }</h3>\n          <div className='meta'>\n            { Math.ceil(podcast.duration / 60) } minutes\n          </div>\n        </a>\n      )) }\n\n      <style jsx>{`\n        .podcast {\n          display: block;\n          text-decoration: none;\n          color: #333;\n          padding: 15px;\n          border-bottom: 1px solid rgba(0,0,0,0.2);\n          cursor: pointer;\n        }\n        .podcast:hover {\n          color: #000;\n        }\n        .podcast h3 {\n          margin: 0;\n        }\n        .podcast .meta {\n          color: #666;\n          margin-top: 0.5em;\n          font-size: 0.8em;\n        }\n      `}</style>\n    </div>\n  }\n}","import Link from 'next/link'\nimport Layout from '../components/Layout';\nimport LatestPodcastsWithClick from '../components/LatestPodcastsWithClick';\nimport SeriesGrid from '../components/SeriesGrid';\nimport Error from './_error';\n\nexport default class extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      openPodcast: null\n    }\n  }\n\n  static async getInitialProps({query, res}){\n    let idChannel = query.id\n\n    try{\n      let  [reqChannel, reqSeries, reqAudios] = await Promise.all([\n        fetch(`https://api.audioboom.com/channels/${idChannel}`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`)\n      ])\n\n      if(reqChannel.status >= 404) {\n        res.statusCode = reqChannel.status\n        return { channel: null, audioClips: null, series: null, statusCode: reqChannel.status}\n      }\n\n      let dataChannel = await reqChannel.json()\n      let channel = dataChannel.body.channel\n\n      \n      let dataAudios = await reqAudios.json()\n      let audioClips = dataAudios.body.audio_clips\n          \n      let dataSeries = await reqSeries.json()\n      let series = dataSeries.body.channels\n      \n      return { channel , audioClips, series, statusCode: 200 }\n    } catch(e) {\n      res.statusCode = 503\n      return { channel: null, audioClips: null, series: null, statusCode: 503}\n    }\n  }\n\n  openPodcast = (event, podcast) => {\n    event.preventDefaults()\n    this.setState({\n      openPodcast: podcast\n    })\n  }\n\n  render() {\n    const { channel, audioClips, series, statusCode } = this.props\n    const { openPodcast } = this.state\n\n    if (statusCode !== 200){\n      return <Error statusCode={ statusCode }/>\n    }\n\n    return (\n      <Layout title={`Channel '${channel.title}'`}>\n\n        <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\n\n        { openPodcast && <div>Hay un podcast abierto</div> }\n        <h1>{ channel.title }</h1>\n\n        <SeriesGrid series={series} />\n\n        <LatestPodcasts audioClips={audioClips} />\n\n        <style jsx>\n        {`        \n        .banner {\n          width: 100%;\n          padding-bottom: 25%;\n          background-position: 50% 50%;\n          background-size: cover;\n          background-color: #aaa;\n        }\n        \n        h1 {\n          font-weight: 600;\n          padding: 15px;\n        }        \n        `}\n        </style>       \n      </Layout>\n    )\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAHA;AAAA;AAKA;AAAA;AACA;AAAA;AAPA;AADA;AAAA;AAAA;AAoCA;;;;AAxCA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAwCA;AACA;AAAA;AACA;AADA;AAGA;AACA;AA3CA;AACA;AADA;AAFA;AAKA;AACA;;;AAwCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AAEA;AAAA;AATA;AAAA;AAAA;AA6BA;;;;;;;;;;;;;AA7EA;AACA;;;AAGA;AACA;;;;AADA;AAAA;AAAA;AACA;AAKA;;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;;AADA;AACA;;AAGA;AACA;;AADA;AACA;;AAEA;AACA;;AADA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AAtCA;AACA;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}