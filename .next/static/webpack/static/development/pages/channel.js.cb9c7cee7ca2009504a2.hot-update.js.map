{"version":3,"file":"static/webpack/static/development/pages/channel.js.cb9c7cee7ca2009504a2.hot-update.js","sources":["webpack:///./pages/channel.js"],"sourcesContent":["import Link from 'next/link'\nimport Layout from '../components/Layout';\nimport LatestPodcasts from '../components/LatestPodcasts';\nimport SeriesGrid from '../components/SeriesGrid';\nimport Error from './_error';\n\nexport default class extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      openPodcast: null\n    }\n  }\n\n  static async getInitialProps({query, res}){\n    let idChannel = query.id\n\n    try{\n      let  [reqChannel, reqSeries, reqAudios] = await Promise.all([\n        fetch(`https://api.audioboom.com/channels/${idChannel}`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`)\n      ])\n\n      if(reqChannel.status >= 404) {\n        res.statusCode = reqChannel.status\n        return { channel: null, audioClips: null, series: null, statusCode: reqChannel.status}\n      }\n\n      let dataChannel = await reqChannel.json()\n      let channel = dataChannel.body.channel\n\n      \n      let dataAudios = await reqAudios.json()\n      let audioClips = dataAudios.body.audio_clips\n          \n      let dataSeries = await reqSeries.json()\n      let series = dataSeries.body.channels\n      \n      return { channel , audioClips, series, statusCode: 200 }\n    } catch(e) {\n      res.statusCode = 503\n      return { channel: null, audioClips: null, series: null, statusCode: 503}\n    }\n  }\n\n  openPodcast = (event, podcast) => {\n    event.preventDefaults()\n    this.setState({\n      openPodcast: podcast\n    })\n  }\n\n  render() {\n    const { channel, audioClips, series, statusCode } = this.props\n    const { openPodcast } = this.state\n\n    if (statusCode !== 200){\n      return <Error statusCode={ statusCode }/>\n    }\n\n    return (\n      <Layout title={`Channel '${channel.title}'`}>\n\n        <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\n\n        { openPodcast && <div>Hay un podcast abierto</div> }\n        <h1>{ channel.title }</h1>\n\n        <SeriesGrid series={series} />\n\n        <LatestPodcasts audioClips={audioClips} />\n\n        <style jsx>\n        {`        \n        .banner {\n          width: 100%;\n          padding-bottom: 25%;\n          background-position: 50% 50%;\n          background-size: cover;\n          background-color: #aaa;\n        }\n        \n        h1 {\n          font-weight: 600;\n          padding: 15px;\n        }        \n        `}\n        </style>       \n      </Layout>\n    )\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAwCA;AACA;AAAA;AACA;AADA;AAGA;AACA;AA3CA;AACA;AADA;AAFA;AAKA;AACA;;;AAwCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AAEA;AAAA;AATA;AAAA;AAAA;AA6BA;;;;;;;;;;;;;AA7EA;AACA;;;AAGA;AACA;;;;AADA;AAAA;AAAA;AACA;AAKA;;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;;AADA;AACA;;AAGA;AACA;;AADA;AACA;;AAEA;AACA;;AADA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AAtCA;AACA;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}